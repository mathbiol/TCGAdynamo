<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang=""> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="apple-touch-icon" href="apple-touch-icon.png">
       
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <style>
            body {
                padding-top: 50px;
                padding-bottom: 20px;
            }
        </style>
        <link rel="stylesheet" href="css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="css/main.css">
        <script src="js/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script>
        <script src="js/vendor/jquery-1.11.2.js"></script>
        <script src="js/vendor/three.min.js"></script>
       
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
        <script>
            
            function Model(){
                
                this.patients;
                
               
            }
            
            function Visualization(){
                
                scene = new THREE.Scene();
                width = 800;
                height = 650;
                canvas = document.createElement('canvas');
                document.getElementById('visuals').appendChild(canvas);
                renderer = new THREE.WebGLRenderer({canvas: canvas,  antialiasing: true });
                renderer.setSize(width, height);
                camera_parameter=30;
                camera = new THREE.OrthographicCamera( width*camera_parameter / - 2, width*camera_parameter / 2, height*camera_parameter / 2, height*camera_parameter / - 2, - 500, 1000 );
                camera.position.x = 0;
                camera.position.y = 0;
                camera.position.z = 100;
                
                render = function(){
                    
                    renderer.render( this.scene, this.camera );
                }
                
                render();
                
            }
            
            function Controller(){
                
                this.add_rppa_parameters = function(){
                    
                    document.getElementById("clinical_controls").innerHTML="";
                    document.getElementById("rppa_controls").innerHTML="";
                    
                    controls = document.getElementById("clinical_controls");
                    wrapper_row = document.createElement('div');
                    wrapper_row.setAttribute('class',"row");
                    
                    $(wrapper_row).appendTo(controls);
                    for (var i in $model.patients[0].clinical){
                        new_row = document.createElement('div');
                        new_row.setAttribute('class',"row");
                        $(new_row).appendTo(wrapper_row);
                    
                        column = document.createElement('div');
                        column.setAttribute('class',"col-md-8");
                        column.innerHTML=i;
                        $(column).appendTo(new_row);
                    }
                   
                    
                    controls = document.getElementById("rppa_controls");
                    
                    console.log($model.patients[0].RPPA.length);
                    
                    wrapper_row = document.createElement('div');
                    wrapper_row.setAttribute('class',"row");
                    
                    $(wrapper_row).appendTo(controls);
                    for (var i=0;i<$model.patients[0].RPPA.length;i++){
                        
                        new_row = document.createElement('div');
                        new_row.setAttribute('class',"row");
                        $(new_row).appendTo(wrapper_row);
                    
                        column = document.createElement('div');
                        column.setAttribute('class',"col-md-8");
                        column.innerHTML=$model.patients[0].RPPA[i].ID;
                        $(column).appendTo(new_row);
                        
                    }
                    
                    
                    
                    
                }
                
                function loadJSON(callback, which) {  
                    var file_string = "json_data/"+which+"_data.json";
                    console.log("loading "+file_string);
                    var xobj = new XMLHttpRequest();
                    xobj.overrideMimeType("application/json");
                    xobj.open('GET', file_string, true);
                    xobj.onreadystatechange = function () {
                    if (xobj.readyState == 4 && xobj.status == "200") {
                        callback(xobj.responseText);
                    }
                    };
                    xobj.send(null); 
                }
                
                $(".dataset_selection").click(function(e){
                    console.log(e.target.id+" selected");
                    selected_data_set=e.target.id;
                    loadJSON(function(response) {
                        $model.patients = JSON.parse(response);
                        console.log($model.patients.length);
                        $controller.add_rppa_parameters();
                    }, e.target.id);
                    
                });
                
            }
            
            $(function(){
                
                $visualization = new Visualization();
                
                $controller = new Controller();
                
                $model = new Model();
                
               
            });
                
        </script>
    </head>
    <body>
       
        <div class="container-fluid">
            
            <div class="row">
                <div class="col-md-4">
                <div class="dropdown">
                <button class="btn btn-default dropdown-toggle" type="button" id="menu1" data-toggle="dropdown">Select Dataset
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu" aria-labelledby="menu1">
                    <li role="presentation"><a class="dataset_selection" role="menuitem" tabindex="-1" href="#" id="acc">acc</a></li>
                    <li role="presentation"><a class="dataset_selection" role="menuitem" tabindex="-1" href="#" id="blca">blca</a></li>
                    <li role="presentation"><a class="dataset_selection" role="menuitem" tabindex="-1" href="#" id="brca">brca</a></li>
                    <li role="presentation"><a class="dataset_selection" role="menuitem" tabindex="-1" href="#" id="cesc">cesc</a></li>
                    <li role="presentation"><a class="dataset_selection" role="menuitem" tabindex="-1" href="#" id="chol">chol</a></li>
                    <li role="presentation"><a class="dataset_selection" role="menuitem" tabindex="-1" href="#" id="cntl">cntl</a></li>
                    <li role="presentation"><a class="dataset_selection" role="menuitem" tabindex="-1" href="#" id="coad">coad</a></li>
                    <li role="presentation"><a class="dataset_selection" role="menuitem" tabindex="-1" href="#" id="dlbc">dlbc</a></li>
                    <li role="presentation"><a class="dataset_selection" role="menuitem" tabindex="-1" href="#" id="esca">esca</a></li>
                    <li role="presentation"><a class="dataset_selection" role="menuitem" tabindex="-1" href="#" id="fppp">fppp</a></li>
                    <li role="presentation"><a class="dataset_selection" role="menuitem" tabindex="-1" href="#" id="gbm">gbm</a></li>
                    <li role="presentation"><a class="dataset_selection" role="menuitem" tabindex="-1" href="#" id="hnsc">hnsc</a></li>
                    <li role="presentation"><a class="dataset_selection" role="menuitem" tabindex="-1" href="#" id="kich">kich</a></li>
                    <li role="presentation"><a class="dataset_selection" role="menuitem" tabindex="-1" href="#" id="kirp">kirp</a></li>
                    <li role="presentation"><a class="dataset_selection" role="menuitem" tabindex="-1" href="#" id="laml">laml</a></li>
                    <li role="presentation"><a class="dataset_selection" role="menuitem" tabindex="-1" href="#" id="lcml">lcml</a></li>
                    <li role="presentation"><a class="dataset_selection" role="menuitem" tabindex="-1" href="#" id="lgg">lgg</a></li>
                    <li role="presentation"><a class="dataset_selection" role="menuitem" tabindex="-1" href="#" id="lihc">lihc</a></li>
                    <li role="presentation"><a class="dataset_selection" role="menuitem" tabindex="-1" href="#" id="lnnh">lnnh</a></li>
                    <li role="presentation"><a class="dataset_selection" role="menuitem" tabindex="-1" href="#" id="luad">luad</a></li>
                    <li role="presentation"><a class="dataset_selection" role="menuitem" tabindex="-1" href="#" id="lusc">lusc</a></li>
                    <li role="presentation"><a class="dataset_selection" role="menuitem" tabindex="-1" href="#" id="meso">meso</a></li>
                    <li role="presentation"><a class="dataset_selection" role="menuitem" tabindex="-1" href="#" id="ov">ov</a></li>
                    <li role="presentation"><a class="dataset_selection" role="menuitem" tabindex="-1" href="#" id="paad">paad</a></li>
                    <li role="presentation"><a class="dataset_selection" role="menuitem" tabindex="-1" href="#" id="pcpg">pcpg</a></li>
                    <li role="presentation"><a class="dataset_selection" role="menuitem" tabindex="-1" href="#" id="prad">prad</a></li>
                    <li role="presentation"><a class="dataset_selection" role="menuitem" tabindex="-1" href="#" id="read">read</a></li>
                    <li role="presentation"><a class="dataset_selection" role="menuitem" tabindex="-1" href="#" id="sarc">sarc</a></li>
                    <li role="presentation"><a class="dataset_selection" role="menuitem" tabindex="-1" href="#" id="skcm">skcm</a></li>
                    <li role="presentation"><a class="dataset_selection" role="menuitem" tabindex="-1" href="#" id="stad">stad</a></li>
                    <li role="presentation"><a class="dataset_selection" role="menuitem" tabindex="-1" href="#" id="tgct">tgct</a></li>
                    <li role="presentation"><a class="dataset_selection" role="menuitem" tabindex="-1" href="#" id="thym">thym</a></li>
                    <li role="presentation"><a class="dataset_selection" role="menuitem" tabindex="-1" href="#" id="ucec">ucec</a></li>
                    <li role="presentation"><a class="dataset_selection" role="menuitem" tabindex="-1" href="#" id="ucs">ucs</a></li>
                    <li role="presentation"><a class="dataset_selection" role="menuitem" tabindex="-1" href="#" id="uvm">uvm</a></li>
                </ul>
                </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-7" id="visuals"></div>
                <div class="col-md-5" id="parameter_controls">
                    <div class="row" style="margin-top:-20px"></div>
                    <div class="col-md-12" id="clinical_controls"></div>
                    <div class="row"></div>
                    <div class="col-md-12" id="rppa_controls"></div>
                </div>
                
            </div>
            
            <div class="row">
                <div class="col-md-6">selected patients information goes here</div>
                <div class="col-md-6">parameter visualization goes here</div>
            </div>

    </div> 
        
   
    </body>
</html>
